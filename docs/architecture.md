# Архитектура DataPipeline Hub

## Компоненты

### 1. API Gateway
- Точка входа для внешних запросов.
- Реализован на FastAPI.
- Обрабатывает:
  - Запуск пайплайнов
  - Получение статуса
  - Метрики системы

### 2. Orchestrator (Airflow)
- Управление workflow.
- Планирование по cron-расписанию.
- Обработка ошибок и повторные попытки.
- Интеграция с:
  - БД (PostgreSQL)
  - Кеш (Redis)
  - API Gateway

### 3. Transform Engine
- Выполняет пользовательские скрипты (Python, SQL).
- Работает с:
  - Входящими данными (staging)
  - Промежуточными результатами
  - Конечными хранилищами

### 4. Monitoring System
- **Prometheus**: сбор метрик.
- **Grafana**: визуализация.
- **Логирование**: централизованное хранение в PostgreSQL.

## Потоки данных

1. **Извлечение**  
   - SQL-запросы к источникам.
   - API-запросы.
   - Загрузка файлов (CSV, JSON).

2. **Преобразование**  
   - Очистка данных.
   - Агрегация.
   - Обогащение (lookup-таблицы).

3. **Загрузка**  
   - В staging-таблицы.
   - В аналитические витрины.
   - В внешние системы (Slack, Email).

## Безопасность

- Все соединения через TLS.
- Аутентификация API-ключей.
- Разграничение доступа к данным.
